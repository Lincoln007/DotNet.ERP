using System;
using Pharos.Infrastructure.Data.Cache;
using Pharos.Infrastructure.Data.Redis;
using Newtonsoft.Json;

namespace Pharos.Logic.ApiData.Pos.Cache
{
    public class OnlineCache : RedisCacheWrapper<MachineInformation>
    {
        public OnlineCache()
            : base("OnlineCache", new TimeSpan(1, 0, 0, 0), true)
        { }

        public override void Set(string key, MachineInformation value)
        {
            base.Set(key, value);
            //pup
            RedisManager.Publish("SyncOnlineCache", JsonConvert.SerializeObject(value));
        }
    }
}
