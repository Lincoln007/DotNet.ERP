using Pharos.Wpf.ViewModelHelpers;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Pharos.POS.Retailing.ViewModels
{
    public class LoginViewModel : BaseViewModel
    {
        public LoginViewModel()
        {
            try
            {
                var images = Directory.GetFiles(@"Images\Login", "POS-login-*.png");
                var index = new Random().Next(images.Count() - 1);
                BackgroundImage = images[index];
            }
            catch
            {
            }
        }

        string logoIcon = @"Images\Login\logo_max.png";
        public string LogoIcon
        {
            get
            {
                return logoIcon;
            }
            set
            {
                logoIcon = value;
                this.OnPropertyChanged(o => o.LogoIcon);
            }
        }

        string backgroundImage = @"Images\Login\POS-login-5.png";
        public string BackgroundImage
        {
            get
            {
                return backgroundImage;
            }
            set
            {
                backgroundImage = value;
                this.OnPropertyChanged(o => o.BackgroundImage);
            }
        }

        string appName = "道诚科技 · 商业管理软件";
        public string AppName
        {
            get
            {
                return appName;
            }
            set
            {
                appName = value;
                this.OnPropertyChanged(o => o.AppName);
            }
        }

        string title = "欢迎使用 道诚科技 · 商业管理软件";
        public string Title
        {
            get
            {
                return title;
            }
            set
            {
                title = value;
                this.OnPropertyChanged(o => o.Title);
            }
        }

        string account = string.Empty;
        public string Account
        {
            get
            {
                return account;
            }
            set
            {
                account = value;
                this.OnPropertyChanged(o => o.Account);
            }
        }

        string password = string.Empty;
        public string Password
        {
            get
            {
                return password;
            }
            set
            {
                password = value;
                this.OnPropertyChanged(o => o.Password);
            }
        }

        public GeneralCommand<object> LoginCommand
        {
            get
            {
                return new GeneralCommand<object>((_Params, command) =>
                {
                    //if login
                    var page =new PosWindow();
                    page.Show();
                    CurrentWindow.Close();
                });
            }
        }

        public GeneralCommand<object> SettingsCommand
        {
            get
            {
                return new GeneralCommand<object>((_Params, command) =>
                {
                    var win = new MachineSettings();
                    win.Owner = CurrentWindow;
                    win.ShowDialog();
                });
            }
        }

    }
}
