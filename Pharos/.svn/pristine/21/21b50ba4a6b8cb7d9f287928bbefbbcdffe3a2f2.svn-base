<Window x:Class="Pharos.POS.Retailing.ChildPages.JiaoBan"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Helpers="clr-namespace:Pharos.POS.Retailing.Helper"
        Width="800" Height="450" Icon="..\Images\banjie.png"
        Title="交班操作"  WindowState="Normal" WindowStyle="None"   Style="{DynamicResource SkinWindowStyle}"
        AllowsTransparency="True"  WindowStartupLocation="CenterScreen"  FontFamily="/Pharos.POS.Retailing;component/Fonts/#Microsoft YaHei" 
        Background="Transparent" BorderBrush="Transparent"
        Name="mainWindow">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="..\Styles\DuiZhangCaoZouStyle.xaml"></ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="80"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"></ColumnDefinition>
                <ColumnDefinition Width="150"></ColumnDefinition>
                <ColumnDefinition Width="80"></ColumnDefinition>
                <ColumnDefinition Width="150"></ColumnDefinition>

                <ColumnDefinition Width="20"></ColumnDefinition>
                <ColumnDefinition Width="130"></ColumnDefinition>
                
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <TextBlock Style="{StaticResource BaseTextBlock}" Grid.Column="0" Grid.Row="0">收银员：</TextBlock>
            <Border BorderThickness="0,0,0,1" Margin="0,0,0,10" BorderBrush="Black" Grid.Column="1" ></Border>
            <TextBlock Text="{Binding UserName}" Style="{StaticResource BaseTextBlock}"  Grid.Column="1" HorizontalAlignment="Left" Grid.Row="0"  PreviewGotKeyboardFocus="TextBox_PreviewGotKeyboardFocus"></TextBlock>

            <TextBlock Style="{StaticResource BaseTextBlock}" Grid.Column="2" Grid.Row="0">密码：</TextBlock>
            <PasswordBox TabIndex="1" VerticalContentAlignment="Center" FontSize="20" Height="35" Margin="0,10"  VerticalAlignment="Bottom" Grid.Column="3" Grid.Row="0" Helpers:PasswordBoxBindingHelper.IsPasswordBindingEnabled="True" Helpers:PasswordBoxBindingHelper.BindedPassword="{Binding Path=Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></PasswordBox>
            <Button TabIndex="2" Command="{Binding Search}"  CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" Style="{StaticResource BtnSearchStyle}" Height="35" Margin="0,10"  Grid.Column="5" Grid.Row="0">查询</Button>
        </Grid>
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="10"></RowDefinition>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>

            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"></ColumnDefinition>
                <ColumnDefinition Width="150"></ColumnDefinition>
                <ColumnDefinition Width="150"></ColumnDefinition>
                <ColumnDefinition Width="200"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Line Grid.Row="0" Grid.ColumnSpan="10" Stroke="#27343D" StrokeThickness="0.2" Y1="1" Y2="1" X1="0" X2="1000"></Line>
            <TextBlock Style="{StaticResource BaseGridTitleTextBlock}" Grid.Column="0" Grid.Row="1">机位：</TextBlock>
            <TextBlock Text="{Binding MachineId}" Style="{StaticResource BaseGridContentTextBlock}" Grid.Column="1" Grid.Row="1"></TextBlock>

            <TextBlock Style="{StaticResource BaseGridTitleTextBlock}" Grid.Column="0" Grid.Row="2">现金入款：</TextBlock>
            <TextBlock Text="{Binding QueryInfos.DepositMoney,StringFormat='{}{0:C}'}" Style="{StaticResource BaseGridContentTextBlock}" Grid.Column="1" Grid.Row="2"></TextBlock>

            <TextBlock Style="{StaticResource BaseGridTitleTextBlock}" Grid.Column="0" Grid.Row="3">现金出款：</TextBlock>
            <TextBlock Text="{Binding QueryInfos.TakeOutMoney,StringFormat='{}{0:C}'}" Style="{StaticResource BaseGridContentTextBlock}" Grid.Column="1" Grid.Row="3"></TextBlock>

            <TextBlock Style="{StaticResource BaseGridTitleTextBlock}" Grid.Column="0" Grid.Row="4">销售总额：</TextBlock>
            <TextBlock  Text="{Binding QueryInfos.TotalSales,StringFormat='{}{0:C}'}" Style="{StaticResource BaseGridContentTextBlock}" Grid.Column="1" Grid.Row="4"></TextBlock>


            <TextBlock Style="{StaticResource BaseGridTitleTextBlock}" Grid.Column="0" Grid.Row="5">换货补价：</TextBlock>
            <TextBlock  Text="{Binding QueryInfos.ChangingSales,StringFormat='{}{0:C}'}" Style="{StaticResource BaseGridContentTextBlock}" Grid.Column="1" Grid.Row="5"></TextBlock>

            <TextBlock Style="{StaticResource BaseGridTitleTextBlock}" Grid.Column="0" Grid.Row="6">退还金额：</TextBlock>
            <TextBlock  Text="{Binding QueryInfos.ReturnSales,StringFormat='{}{0:C}'}" Style="{StaticResource BaseGridContentTextBlock}" Grid.Column="1" Grid.Row="6"></TextBlock>


            <TextBlock Style="{StaticResource BaseGridTitleTextBlock}" Grid.Column="0" Grid.Row="7">剩余现金：</TextBlock>
            <TextBlock Text="{Binding QueryInfos.SurplusCash,StringFormat='{}{0:C}'}" Style="{StaticResource BaseGridContentTextBlock}" Grid.Column="1" Grid.Row="7"></TextBlock>

            <ItemsControl ItemsSource="{Binding QueryInfos.AllPayWayStatistics}" Grid.Column="2" Grid.Row="1" Grid.RowSpan="7" Grid.ColumnSpan="3" Name="panel" BorderBrush="#bbb" BorderThickness="0,1,0,0">
                <ItemsControl.Template>
                    <ControlTemplate>
                        <ScrollViewer x:Name="ScrollViewer" Padding="{TemplateBinding Padding}">
                            <ItemsPresenter />
                        </ScrollViewer>
                    </ControlTemplate>
                </ItemsControl.Template>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                                <ColumnDefinition Width="10"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <TextBlock  Text="{Binding Key}" Style="{StaticResource BaseGridTitleTextBlock}" Grid.Column="0" ></TextBlock>
                            <TextBlock  Text="{Binding Value,StringFormat='{}{0:C}'}"  Style="{StaticResource BaseGridContentTextBlock}" Grid.Column="2"></TextBlock>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

        </Grid>
        <Button TabIndex="3" Command="{Binding BanJieAction}"  CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" Style="{StaticResource BtnSearchStyle}" Background="#817C7C" Height="40" Width="150" Margin="0,20"  Grid.Row="2">确定交班</Button>

    </Grid>
</Window>

