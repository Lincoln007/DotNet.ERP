using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Pharos.Utility;

namespace Pharos.Logic.BLL
{
    public class MemberRechargeBLL
    {
        private readonly MemberRechargeService _service = new MemberRechargeService();
        /// <summary>
        /// add
        /// </summary>
        /// <param name="_memberRecharge"></param>
        /// <returns></returns>
        public OpResult CreateRecharge(Entity.MemberRecharge _memberRecharge)
        {
            //complete base info
            _memberRecharge.CompanyId = CommonService.CompanyId;
            _memberRecharge.CreateDT = DateTime.Now;
            _memberRecharge.CreateUID = Sys.CurrentUser.UID;
            _memberRecharge.RechargeSN = DateTime.Now.ToString("yyyyMMddHHmmss");    //TODO: rechage SN rule
            _memberRecharge.AfterAmount = _memberRecharge.AfterAmount + _memberRecharge.RechargeAmount;//计算充值后
            //统计充值赠送相关

            //更新会员卡金额信息

            return BaseService<Entity.MemberRecharge>.Add(_memberRecharge);
        }
        /// <summary>
        /// query data
        /// </summary>
        /// <param name="beginDate"></param>
        /// <param name="endDate"></param>
        /// <param name="keyWold"></param>
        /// <returns></returns>
        public object FindRechargePageList(DateTime? beginDate, DateTime? endDate, string keyWold, out int count)
        {
            return _service.FindRechargePageList(beginDate, endDate, keyWold, out count);
        }
    }
}
