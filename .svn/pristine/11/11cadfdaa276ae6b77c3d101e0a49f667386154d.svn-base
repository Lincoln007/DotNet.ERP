@model Pharos.Logic.OMS.Entity.Area
@{
    Layout = "~/Views/Shared/_FormLayout.cshtml";
}

<div class="default-form">
    @using(Html.BeginForm())
    {
        @Html.HiddenFor(o=>o.AreaID)
        @Html.Hidden("SelectPSN")
        <div class="content">
            <table class="table-form" width="100%" height="143px">
                <tr>
                    <td class="name">隶属分类：</td>
                    <td class="input">@Form.CityCombobox("AreaPID", ViewBag.category as SelectListItem, empty: "请选择", dataOptions: Model.AreaID == 0 ? "" : "readonly:true")</td>
                </tr>
                <tr>
                    <td class="name">地区名称：</td>
                    <td class="input">@Html.TextBoxFor(o => o.Title, new { @class = "easyui-textbox", data_options = "required:true" })</td>
                </tr>
                <tr>
                    <td class="name">简拼：</td>
                    <td class="input">@Html.TextBoxFor(o => o.JianPin, new { @class = "easyui-textbox", data_options = "" })</td>
                </tr>
                <tr>
                    <td class="name">全拼：</td>
                    <td class="input">@Html.TextBoxFor(o => o.QuanPin, new { @class = "easyui-textbox", data_options = "" })</td>
                </tr>
                <tr>
                    <td class="name">区号：</td>
                    <td class="input">@Html.TextBoxFor(o => o.AreaSN, new { @class = "easyui-numberbox" })</td>
                </tr>
                <tr>
                    <td class="name">邮政编码：</td>
                    <td class="input">@Html.TextBoxFor(o => o.PostCode, new { @class = "easyui-numberbox" })</td>
                </tr>
                <tr>
                    <td class="name">排序号：</td>
                    <td class="input">@Html.TextBoxFor(o => o.OrderNum, new { @class = "easyui-numberbox" })</td>
                </tr>
            </table>
        </div>
    }
</div>

<script type="text/javascript">
    function Refresh() {
        //alert($("#grid")[0]);
        //window.top.$("#grid").datagrid("reload");
        if ($("#hidadd").val() == "1") {
            var psns = $("[name='AreaPID_0']").val();
            if (!psns) psns = $("#SelectPSN").val();
            window.location.href = "@Url.Action("Save")?pid=" + $("#AreaPID_0").combobox("getValue") + "&ptitle=" + $("#AreaPID_0").combobox("getText") + "&pid_0=" + psns;
        } else {
            pharos.easyui.dialog.topClose("formDiv");
            pharos.easyui.dialog.curJquery("formDiv")("#treegrid").treegrid("reload"); 
        }
    }
    function SaveBefore() {
        //alert($("[name='selectCategory']").join().val()); return false;
        return true;
    }
</script>