using Pharos.Logic.ApiData.Pos.ValueObject;
using Pharos.Logic.BLL;
using Pharos.Logic.DAL;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Pharos.Logic.ApiData.Pos.Services
{
    public class DeviceRegInfoService : BaseGeneralService<Pharos.Logic.Entity.DeviceRegInfo, EFDbContext>
    {
        public static void RegisterDevice(string storeId, string machineSn, string deviceSn, DeviceType type)
        {
            CurrentRepository.Add(new Entity.DeviceRegInfo()
            {
                CreateDT = DateTime.Now,
                DeviceSN = deviceSn,
                MachineSN = machineSn,
                State = 0,
                StoreId = storeId,
                Type = (short)type
            });
        }

        public static bool HasRegister(string storeId, string machineSN, string deviceSn, DeviceType type)
        {
            var deviceType = (short)type;
            return CurrentRepository.IsExist(o => o.MachineSN == machineSN && o.StoreId == storeId && o.Type == deviceType && o.DeviceSN == deviceSn);
        }
    }
}
