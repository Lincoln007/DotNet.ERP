@using Pharos.Logic.OMS.Entity
@using Pharos.Logic.OMS.Entity.View
@{
    ViewBag.Title = "Save";
    Layout = "~/Views/Shared/_FormLayout.cshtml";
}
<link href="~/Content/global.css" rel="stylesheet" />

<style type="text/css">
    #TraderTypeList ul {
        width: 98%;
        overflow: hidden;
    }

        #TraderTypeList ul li {
            float: left;
            width: 26%;
            height: 20px;
            line-height: 18px;
            border: 1px solid #d4d4d4;
            border-radius: 5px;
            margin-left: 2%;
            margin-right: 2%;
            margin-bottom: 2%;
            padding-left: 6px;
            padding-right: 6px;
        }

            #TraderTypeList ul li div {
                float: right;
                width: 12px;
                height: 12px;
            }

            #TraderTypeList ul li img {
                border: 0 none;
                cursor: pointer;
                vertical-align: middle;
            }
</style>
<div class="default-form">
    @using (Html.BeginForm())
    {
        <table class="SupplierType-save">
            <tr>
                <td>域名前缀：</td>
                <td><input type="text" name="Name" class="easyui-validatebox" style="height:27px; line-height:27px;  padding:0px 5px; " data-options="required:true,novalidate:false" /></td>
                <td><a href="#" class="easyui-linkbutton button-margin" onclick="$('.default-form form').submit()">添加</a></td>
            </tr>
        </table>
    }
</div>
<div id="TraderTypeList" style="overflow:hidden;overflow-y:auto;height:210px;">
    <ul>
        @foreach (var v in ViewBag.list as List<Realm>)
        {
            <li>
                @v.Name
                <div><img src="/Content/image/close.png" width="12" height="12" onclick="del('@v.Id')" /></div>
            </li>
        }

    </ul>
</div>

<script type="text/javascript">
    $(function () {

    });
    function Refresh() {
        window.location.href = "/DomainLicense/Retain";
    }
    function del(Id) {
        $.messager.confirm('提示', "是否确定删除?", function (r) {
            if (!r) { return r; }
            $.post("@Url.Action("DeleteRetain")", { Id: Id, t: Math.random() }, function (json) {
                if (json.successed) {
                    Refresh();
                } else {
                    $.messager.alert('错误', '删除失败,' + json.message);
                }
            }, "json")
        });
    }
</script>

