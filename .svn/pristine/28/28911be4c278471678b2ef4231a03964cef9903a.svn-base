using Pharos.SocketClient.Retailing.CommandProviders;
using Pharos.SocketClient.Retailing.Protocol.ReceiveFilters;
using SuperSocket.ClientEngine;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Pharos.SocketClient.Retailing.Protocol.Clients
{
    public class PosStoreClient : EasyClient
    {
        public PosStoreClient()
        {
            this.Initialize(new PosStoreFixedHeaderReceiveFilter(new PosStoreCommandNameProvider()), (package) =>
            {
                
            });
        }
        public byte[] Format(byte[] cmdCode, byte[] body)
        {
            var len = BitConverter.GetBytes(body.Length);
            var rawMsg = new byte[8 + body.Length];
            Array.Copy(cmdCode, 0, rawMsg, 0, 4);
            Array.Copy(len, 0, rawMsg, 4, 4);
            Array.Copy(body, 0, rawMsg, 8, body.Length);
            return rawMsg;
        }
    }
}
