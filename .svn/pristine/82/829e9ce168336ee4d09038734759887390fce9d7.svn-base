using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Pharos.OMS.Retailing.Controllers
{
    public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {
            if (!Sys.CurrentUser.IsLogin || Sys.CurrentUser.IsStore)
            {
                return RedirectToAction("Login", "User");
            }     
            //todo: 模拟数据
            string mode = Request["mode"];
            ViewBag.accessCount = 0;
            ViewBag.WelcomeText = "欢迎光临";
            ViewBag.CurUserName = Sys.CurrentUser.FullName;
            ViewBag.CurLoginName = Sys.CurrentUser.UserName;

            var list = new List<Pharos.Sys.Models.MenuModel>() { 
                new Pharos.Sys.Models.MenuModel(){Name="客户管理",Value="3",Id="3",Level=0,Children=new List<Sys.Models.MenuModel>(){
                    new Pharos.Sys.Models.MenuModel(){Name="授权管理",Value="4",Id="4",Level=1,Children=new List<Sys.Models.MenuModel>(),Url="/Authorization/Index"}
                }},
                new Pharos.Sys.Models.MenuModel(){Name="系统管理",Value="1",Id="1",Level=0,Children=new List<Sys.Models.MenuModel>(){
                    new Pharos.Sys.Models.MenuModel(){Name="用户管理",Value="2",Id="2",Level=1,Children=new List<Sys.Models.MenuModel>(),Url="/User/Index"}
                }},
                //会员管理
                new Pharos.Sys.Models.MenuModel(){Name="会员管理",Value="5",Id="5",Level=0,Children=new List<Sys.Models.MenuModel>(){
                    new Pharos.Sys.Models.MenuModel(){Name="会员管理",Value="6",Id="6",Level=1,Children=new List<Sys.Models.MenuModel>(),Url="/Member/Index"}
                }},
                //设备档案
                new Pharos.Sys.Models.MenuModel(){Name="设备档案",Value="7",Id="7",Level=0,Children=new List<Sys.Models.MenuModel>(){
                    new Pharos.Sys.Models.MenuModel(){Name="设备管理",Value="8",Id="8",Level=1,Children=new List<Sys.Models.MenuModel>(),Url="/Device/Index"}
                }}

            };
            
            ViewBag.Menus = list;
            return View();
        }

    }
}
