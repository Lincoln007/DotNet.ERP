using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;
using Newtonsoft.Json.Linq;
using Pharos.Logic.ApiData.Mobile.Services;

namespace Pharos.Api.Retailing.Controllers.Mobile
{
    /// <summary>
    /// 报表
    /// </summary>
    [RoutePrefix("api/mobile")]
    public class ReportController : ApiController
    {
        /// <summary>
        /// 销售类型日结
        /// </summary>
        /// <param name="json"></param>
        /// <returns></returns>
        [HttpPost]
        [Route("SaleTypeDayReport")]
        public object SaleTypeDayReport([FromBody]JObject json)
        {
            string storeId = json.Property("storeId", true);
            string date = json.Property("date", true);
            return ReportService.SaleTypeReport(storeId, date, 1);
        }
        /// <summary>
        /// 销售类型月结
        /// </summary>
        /// <param name="json"></param>
        /// <returns></returns>
        [HttpPost]
        [Route("SaleTypeMonthReport")]
        public object SaleTypeMonthReport([FromBody]JObject json)
        {
            string storeId = json.Property("storeId", true);
            string date = json.Property("date", true);
            return ReportService.SaleTypeReport(storeId, date, 2);
        }
        /// <summary>
        /// 销售明细日统计
        /// </summary>
        /// <param name="json"></param>
        /// <returns></returns>
        [HttpPost]
        [Route("SaleDetailDayReport")]
        public object SaleDetailDayReport([FromBody]JObject json)
        {
            string storeId = json.Property("storeId", true);
            string date = json.Property("date", true);
            return ReportService.SaleDetailDayReport(storeId, date);
        }
        /// <summary>
        /// 销售品类日统计
        /// </summary>
        /// <returns></returns>
        [HttpPost]
        [Route("SaleCategoryDayReport")]
        public object SaleCategoryDayReport([FromBody]JObject json)
        {
            string storeId = json.Property("storeId", true);
            string date = json.Property("date", true);
            return ReportService.SaleDayReport(storeId, date,"1");
        }
        /// <summary>
        /// 销售品牌日统计
        /// </summary>
        /// <returns></returns>
        [HttpPost]
        [Route("SaleBrandDayReport")]
        public object SaleBrandDayReport([FromBody]JObject json)
        {
            string storeId = json.Property("storeId", true);
            string date = json.Property("date", true);
            return ReportService.SaleDayReport(storeId, date, "2");
        }
        /// <summary>
        /// 销售供应商日统计
        /// </summary>
        /// <returns></returns>
        [HttpPost]
        [Route("SaleSupplierDayReport")]
        public object SaleSupplierDayReport([FromBody]JObject json)
        {
            string storeId = json.Property("storeId", true);
            string date = json.Property("date", true);
            return ReportService.SaleDayReport(storeId, date, "3");
        }
        /// <summary>
        /// 销售赠送月统计
        /// </summary>
        /// <returns></returns>
        [HttpPost]
        [Route("SaleGiftReport")]
        public object SaleGiftReport([FromBody]JObject json)
        {
            string date = json.Property("date", true);
            return ReportService.SaleGiftReport(date);
        }
        /// <summary>
        /// 缺货统计
        /// </summary>
        /// <returns></returns>
        [Route("StockOutReport")]
        public object StockOutReport()
        {
            return ReportService.StockOutReport();
        }
        /// <summary>
        /// 过剩统计
        /// </summary>
        /// <returns></returns>
        [Route("StockMoreReport")]
        public object StockMoreReport()
        {
            return ReportService.StockMoreReport();
        }
        /// <summary>
        /// 今日会员量
        /// </summary>
        /// <returns></returns>
        [HttpPost]
        [Route("MemberDayReport")]
        public object MemberDayReport([FromBody]JObject json)
        {
            string date = json.Property("date", true);
            return ReportService.MemberReport(date,1);
        }
        /// <summary>
        /// 本月会员量
        /// </summary>
        /// <returns></returns>
        [HttpPost]
        [Route("MemberMonthReport")]
        public object MemberMonthReport([FromBody]JObject json)
        {
            string date = json.Property("date", true);
            return ReportService.MemberReport(date, 2);
        }
        /// <summary>
        /// 全部会员量
        /// </summary>
        /// <returns></returns>
        [HttpPost]
        [Route("MemberAllReport")]
        public object MemberAllReport([FromBody]JObject json2)
        {
            string date = json2.Property("date", true);
            return ReportService.MemberReport(date, 3);
        }
    }
}